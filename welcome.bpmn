<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<definitions xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="definitions_7a102c45-4f7e-4a65-a7c4-93edcb4b5ae0" targetNamespace="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL">
  <process id="welcome" isExecutable="true" name="welcome">
    <extensionElements>
      <camunda:executionListener class="com.symphony.bdk.workflow.engine.camunda.variable.VariablesListener" event="start">
        <camunda:field name="variables" stringValue="{}"/>
      </camunda:executionListener>
    </extensionElements>
    <startEvent camunda:asyncBefore="true" id="startEvent_a7e8fb4c-da53-490f-9bc7-af62cc670ab1" name="user-joined-room">
      <outgoing>sequenceFlow_bedce562-25e6-431d-8a67-29092cf1d0fa</outgoing>
      <signalEventDefinition id="signalEventDefinition_86671576-c0fe-4c81-b819-a70e21523fad" signalRef="signal_312d7de0-a0e2-45af-9e9a-8e4658eab2a0"/>
    </startEvent>
    <serviceTask camunda:class="com.symphony.bdk.workflow.engine.camunda.CamundaExecutor" id="createOneToOne" name="createOneToOne">
      <extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="executor">com.symphony.bdk.workflow.engine.executor.room.CreateRoomExecutor</camunda:inputParameter>
          <camunda:inputParameter name="activity">{"id":"createOneToOne","on":{"one-of":null,"all-of":null,"form-replied":null,"activity-expired":null,"activity-completed":null,"activity-failed":null,"message-received":null,"message-suppressed":null,"post-shared":null,"im-created":null,"room-created":null,"room-updated":null,"room-deactivated":null,"room-reactivated":null,"room-member-promoted-to-owner":null,"room-member-demoted-from-owner":null,"user-joined-room":{},"user-left-room":null,"user-requested-join-room":null,"connection-requested":null,"connection-accepted":null,"timer-fired":null,"request-received":null,"timeout":null},"if":null,"else":null,"public":null,"user-ids":["${event.initiator.user.userId}"]}</camunda:inputParameter>
        </camunda:inputOutput>
      </extensionElements>
      <incoming>sequenceFlow_bedce562-25e6-431d-8a67-29092cf1d0fa</incoming>
      <outgoing>sequenceFlow_038d7b41-ac11-463d-9ab8-64d861a7fdda</outgoing>
    </serviceTask>
    <sequenceFlow id="sequenceFlow_bedce562-25e6-431d-8a67-29092cf1d0fa" sourceRef="startEvent_a7e8fb4c-da53-490f-9bc7-af62cc670ab1" targetRef="createOneToOne"/>
    <serviceTask camunda:class="com.symphony.bdk.workflow.engine.camunda.CamundaExecutor" id="welcomeMessage" name="welcomeMessage">
      <extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="executor">com.symphony.bdk.workflow.engine.executor.message.SendMessageExecutor</camunda:inputParameter>
          <camunda:inputParameter name="activity">{"id":"welcomeMessage","on":null,"if":null,"else":null,"to":{"stream-id":"${createOneToOne.outputs.roomId}"},"content":"Welcome to this new room! Please be nice to each other! &lt;emoji shortcode=\"nerd_face\"/&gt;\n"}</camunda:inputParameter>
        </camunda:inputOutput>
      </extensionElements>
      <incoming>sequenceFlow_038d7b41-ac11-463d-9ab8-64d861a7fdda</incoming>
      <outgoing>sequenceFlow_d132e63b-4a91-4e96-a6ae-0b3bb72ebc7a</outgoing>
    </serviceTask>
    <sequenceFlow id="sequenceFlow_038d7b41-ac11-463d-9ab8-64d861a7fdda" sourceRef="createOneToOne" targetRef="welcomeMessage"/>
    <endEvent id="endEvent_8242804b-0649-4a4f-a4d2-90faebb51754">
      <incoming>sequenceFlow_d132e63b-4a91-4e96-a6ae-0b3bb72ebc7a</incoming>
    </endEvent>
    <sequenceFlow id="sequenceFlow_d132e63b-4a91-4e96-a6ae-0b3bb72ebc7a" sourceRef="welcomeMessage" targetRef="endEvent_8242804b-0649-4a4f-a4d2-90faebb51754"/>
  </process>
  <signal id="signal_312d7de0-a0e2-45af-9e9a-8e4658eab2a0" name="user-joined-room"/>
  <bpmndi:BPMNDiagram id="BPMNDiagram_dd40ff93-bdd4-4272-968e-482b051a4f7f">
    <bpmndi:BPMNPlane bpmnElement="welcome" id="BPMNPlane_0f8e39b0-bd90-4246-a62a-0af43329cf19">
      <bpmndi:BPMNShape bpmnElement="startEvent_a7e8fb4c-da53-490f-9bc7-af62cc670ab1" id="BPMNShape_22e79e2b-400d-40f8-ae4f-03c0f9d64afb">
        <dc:Bounds height="36.0" width="36.0" x="100.0" y="100.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="createOneToOne" id="BPMNShape_3482e202-d44b-4f12-a748-be6d01be13cf">
        <dc:Bounds height="80.0" width="100.0" x="186.0" y="78.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sequenceFlow_bedce562-25e6-431d-8a67-29092cf1d0fa" id="BPMNEdge_7d0e7858-4a2c-4510-a22c-b278c75b0a56">
        <di:waypoint x="136.0" y="118.0"/>
        <di:waypoint x="186.0" y="118.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape bpmnElement="welcomeMessage" id="BPMNShape_8f3c0f56-adea-426f-827d-4d5176bddaaf">
        <dc:Bounds height="80.0" width="100.0" x="336.0" y="78.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sequenceFlow_038d7b41-ac11-463d-9ab8-64d861a7fdda" id="BPMNEdge_b7357fe2-c3ce-4c57-8fd5-0f62319a64c6">
        <di:waypoint x="286.0" y="118.0"/>
        <di:waypoint x="336.0" y="118.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape bpmnElement="endEvent_8242804b-0649-4a4f-a4d2-90faebb51754" id="BPMNShape_d3f9c690-5c0e-4c13-b1f1-562d4ebf1745">
        <dc:Bounds height="36.0" width="36.0" x="486.0" y="100.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sequenceFlow_d132e63b-4a91-4e96-a6ae-0b3bb72ebc7a" id="BPMNEdge_dc4e6855-bf3e-4c79-b3ee-95e4ed3d9e1f">
        <di:waypoint x="436.0" y="118.0"/>
        <di:waypoint x="486.0" y="118.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
