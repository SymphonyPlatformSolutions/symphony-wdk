id: all-of-messages-received
activities:
  - send-message:
      id: start
      on:
        message-received:
          content: /start
          # should be 1-1 only
      content: start fork

  - execute-script:
      id: script
      on:
        message-received:
          content: /update
      script:
        println("script is done")

  - send-message:
      id: endMessage
      on:
        all-of:
        - message-received:
            content: /message
        - user-joined-room: {}
      content: end join
