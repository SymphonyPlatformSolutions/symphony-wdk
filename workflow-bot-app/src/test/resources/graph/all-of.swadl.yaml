id: all-of-messages-received
activities:
  - send-message:
      id: start
      on:
        message-received:
          content: /start
          # should be 1-1 only
      content: start fork
  - send-message:
      id: join
      on:
        all-of:
        - message-received:
            content: /message
        - user-joined-room: {}
        - activity-completed:
            activity-id: script
      content: end join

  - execute-script:
      id: script
      on:
        activity-completed:
          activity-id: start
      script:
        println("script is done")
