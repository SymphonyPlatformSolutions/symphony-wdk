# WDK configuration
wdk:
  workflows:
    path: ./workflows
  properties:
    monitoring-token: ${wdk.monitoring.token:} # The default value is an empty String

# BDK configuration
bdk:
  host:
  bot:
    username:
    privateKey:
      path:
  default-headers:
    User-Agent: "Symphony-WDK/@wdk.version@ Java/${java.version}"

version: @wdk.version@

# Camunda configuration
camunda:
  bpm:
    # Job execution is configured to pick up expired/scheduled activities quickly
    job-execution:
      wait-time-in-millis: 1000
      max-wait: 1000
    # Remove WARN logs at startup (we are not using this feature but our own watcher)
    deployment-resource-pattern:
    generic-properties:
      properties:
        # Avoid requests to the outside world
        telemetryReporterActivate: false
    # Upon failures, do not retry, this is left to the workflow's developer to control
    default-number-of-retries: 1

# Spring boot configuration
spring:
  datasource:
    username: sa
    password:
    driver-class-name: org.h2.Driver
    url: jdbc:h2:file:~/.data/process_engine;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;AUTO_SERVER=TRUE
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher

  main:
    banner-mode: off
    # To completely disable listening to an HTTP port
    # web-application-type: none
  groovy:
    template:
      # Avoid warning log during startup
      check-template-location: false

# Server Configuration, listen on port 8080 by default
server:
  servlet:
    contextPath: /wdk

logging:
  pattern:
    file: "%d{yyyy-MM-dd'T'HH:mm:ss,SSS}Z %-5level [%t] %C{-15}: %m proc.id=%mdc{X-PROCESS-ID} act.id=%mdc{X-ACTIVITY-ID} %n%xEx"
    console: "%d{yyyy-MM-dd'T'HH:mm:ss,SSS}Z %-5level [%t] %C{-15}: %m proc.id=%mdc{X-PROCESS-ID} act.id=%mdc{X-ACTIVITY-ID} %n%xEx"
  level:
    com.symphony: DEBUG
    # Troubleshoot Camunda by setting lower log level
    org.camunda: WARN
    # Audit trail can be disabled with WARN level
    #audit-trail: WARN
    # Disable BPMN image generation
    com.symphony.bdk.workflow.engine.camunda.bpmn.CamundaBpmnBuilder: INFO

# Actuator endpoint is enabled by default on port 8081
management:
  health:
    camunda:
      enabled: true
  endpoints:
    web:
      exposure:
        include: "*"
  server:
    port: 8081
